<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Facelets - JavaServer Faces View Definition Framework</title><link xmlns="" href="css/xhtml.css" rel="stylesheet" type="text/css" /><meta content="DocBook XSL Stylesheets V1.69.0" name="generator" /></head><body><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="N10001" />Facelets - JavaServer Faces View Definition Framework</h1></div><div><h2 class="subtitle">Developer Documentation</h2></div><div><p class="releaseinfo">1.0.0</p></div></div><div /><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#intro">Introduction</a></span></dt><dt><span class="preface"><a href="#guide">Documentation Guide</a></span></dt><dt><span class="chapter"><a href="#gettingstarted">1. Getting Started with Facelets</a></span></dt><dd><dl><dt><span class="sect1"><a href="#gettingstarted-download">1.1. Downloading Facelets</a></span></dt><dt><span class="sect1"><a href="#gettingstarted-dependencies">1.2. Dependencies</a></span></dt><dt><span class="sect1"><a href="#gettingstarted-layout">1.3. Directory Structure</a></span></dt><dt><span class="sect1"><a href="#gettingstarted-setup">1.4. Project Setup</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gettingstarted-setup-web">1.4.1. Web.xml Descriptor</a></span></dt><dt><span class="sect2"><a href="#gettingstarted-setup-faces">1.4.2. Faces-Config.xml</a></span></dt></dl></dd><dt><span class="sect1"><a href="#gettingstarted-bean">1.5. The NumberBean</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gettingstarted-bean-java">1.5.1. The Java Code</a></span></dt><dt><span class="sect2"><a href="#gettingstarted-bean-config">1.5.2. Faces Bean Descriptor</a></span></dt></dl></dd><dt><span class="sect1"><a href="#gettingstarted-view">1.6. Creating Web Pages</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gettingstarted-view-template">1.6.1. The Page Template - template.xhtml</a></span></dt><dt><span class="sect2"><a href="#gettingstarted-view-guess">1.6.2. Configuring User Input - guess.xhtml</a></span></dt><dt><span class="sect2"><a href="#gettingstarted-view-response">1.6.3. Displaying the Response - response.xhtml</a></span></dt></dl></dd><dt><span class="sect1"><a href="#gettingstarted-nav">1.7. Handling Navigation</a></span></dt><dt><span class="sect1"><a href="#gettingstarted-deploy">1.8. Deployment</a></span></dt></dl></dd><dt><span class="chapter"><a href="#config">2. Configuration</a></span></dt><dd><dl><dt><span class="sect1"><a href="#config-faces">2.1. Configuring JavaServer Faces</a></span></dt><dd><dl><dt><span class="sect2"><a href="#config-faces-ri">2.1.1. JavaServer Faces RI</a></span></dt><dt><span class="sect2"><a href="#config-faces-apache">2.1.2. Apache MyFaces</a></span></dt></dl></dd><dt><span class="sect1"><a href="#config-webapp">2.2. Web Application Descriptors</a></span></dt><dd><dl><dt><span class="sect2"><a href="#config-webapp-init">2.2.1. Initialization Parameters</a></span></dt><dt><span class="sect2"><a href="#config-webapp-security">2.2.2. Security</a></span></dt></dl></dd><dt><span class="sect1"><a href="#config-logging">2.3. Logging</a></span></dt></dl></dd><dt><span class="chapter"><a href="#taglib">3. Tag Libraries</a></span></dt><dd><dl><dt><span class="sect1"><a href="#taglib-use">3.1. Using Tags</a></span></dt><dd><dl><dt><span class="sect2"><a href="#taglib-use-normal">3.1.1. Tag Namespaces</a></span></dt><dt><span class="sect2"><a href="#taglib-use-jsfc">3.1.2. Using 'jsfc'</a></span></dt><dt><span class="sect2"><a href="#taglib-use-unresolved">3.1.3. Unresolved Namespaces</a></span></dt></dl></dd><dt><span class="sect1"><a href="#taglib-available">3.2. Available Tag Libraries</a></span></dt><dd><dl><dt><span class="sect2"><a href="#taglib-available-spec">3.2.1. JavaServer Faces Specification</a></span></dt><dt><span class="sect2"><a href="#taglib-available-ui">3.2.2. Templating Library</a></span></dt><dt><span class="sect2"><a href="#taglib-available-jstl">3.2.3. JSTL Support</a></span></dt><dt><span class="sect2"><a href="#taglib-available-adf">3.2.4. Oracle ADF Faces</a></span></dt></dl></dd><dt><span class="sect1"><a href="#taglib-function">3.3. Functions</a></span></dt><dt><span class="sect1"><a href="#taglib-web">3.4. Loading Libraries</a></span></dt><dt><span class="sect1"><a href="#taglib-create">3.5. Creating Tag Libraries</a></span></dt><dd><dl><dt><span class="sect2"><a href="#taglib-create-schema">3.5.1. Tag Library Schema</a></span></dt><dt><span class="sect2"><a href="#taglib-create-component">3.5.2. UIComponents</a></span></dt><dt><span class="sect2"><a href="#taglib-create-validator">3.5.3. Validators</a></span></dt><dt><span class="sect2"><a href="#taglib-create-converter">3.5.4. Converters</a></span></dt><dt><span class="sect2"><a href="#taglib-create-custom">3.5.5. Custom Tags</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#template">4. Templating and Re-Use</a></span></dt><dd><dl><dt><span class="sect1"><a href="#template-overview">4.1. Overview</a></span></dt><dt><span class="sect1"><a href="#template-tags">4.2. UI Tags</a></span></dt><dd><dl><dt><span class="sect2"><a href="#template-tags-composition">4.2.1. Compositions</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#architecture">5. Facelets Architecture</a></span></dt><dd><dl><dt><span class="sect1"><a href="#architecture-overview">5.1. Architecture Overview</a></span></dt><dt><span class="sect1"><a href="#architecture-api">5.2. Facelets API</a></span></dt><dd><dl><dt><span class="sect2"><a href="#architecture-api-factory">5.2.1. FaceletFactory</a></span></dt><dt><span class="sect2"><a href="#architecture-api-facelet">5.2.2. Facelet</a></span></dt><dt><span class="sect2"><a href="#architecture-api-handler">5.2.3. FaceletHandler</a></span></dt></dl></dd><dt><span class="sect1"><a href="#architecture-compiler">5.3. Document Compiler</a></span></dt></dl></dd><dt><span class="chapter"><a href="#dev">6. Extending Facelets</a></span></dt><dd><dl><dt><span class="sect1"><a href="#dev-tag">6.1. Developing Tags</a></span></dt><dt><span class="sect1"><a href="#dev-custom">6.2. Custom JSF Handlers</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dev-custom-component">6.2.1. UIComponents</a></span></dt><dt><span class="sect2"><a href="#dev-custom-validator">6.2.2. Validators</a></span></dt><dt><span class="sect2"><a href="#dev-custom-converter">6.2.3. Converters</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#building">7. Building Facelets</a></span></dt><dd><dl><dt><span class="sect1"><a href="#building-ant">7.1. Using Ant</a></span></dt><dt><span class="sect1"><a href="#building-ide">7.2. IDE Integration</a></span></dt></dl></dd></dl></div><div class="preface" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="intro" />Introduction</h2></div></div><div /></div><p>
            The web community is eagerly seeking a light-weight, templating framework backed by JavaServer Faces as the industry standard. While JavaServer Faces and JavaServer Pages technology (<span class="abbrev">JSP</span>) are meant to be aligned, Facelets steps outside of the JSP specification and provides a highly performant, JSF-centric view technology. Anyone who has created a JSP page will be able to do the same with Facelets and familiar XML-tag use. The difference is under the hood where all the burden of the JSP vendor API is removed to greatly enhance JSF as a platform and provide easy plug-and-go development without requiring JSP tag development.
        </p><p>
			JavaServer Faces <code class="literal">UIComponents</code> are first class citizens within Facelets; there's no need to develop extra objects to integrate. There's also no need to learn yet another XML schema to define your views.
		</p><p>
			Facelets includes many features such as:
		</p><div class="itemizedlist"><ul type="disc"><li>
				Works with JSF 1.1 and JSF 1.2, including Sun's RI and Apache MyFaces.
			</li><li>
				Zero Tag development time for UIComponents
			</li><li>
				Fast Templating/Decorators for Components and Pages
			</li><li>
				The ability to specify <code class="literal">UIComponent</code> trees in separate files (<code xmlns="" class="literal">UICompositions</code>)
			</li><li xmlns="">
				Line/Tag/Attribute precise Error Reporting
			</li><li>
				Specify Tags in Separate Files, even packaged with Jars
			</li><li>
				Full EL support, including Functions
			</li><li>
				Build-time EL Validation
			</li><li>
				XML configuration files aren't necessary
			</li><li>
				Reserves the '<code class="literal">jsfc</code>' attribute which acts the same as Tapestry's jwcid (Example: <code xmlns="" class="literal">&lt;input id="bar" type="text" jsfc="h:inputText" value="#{foo.bar}"/&gt;</code>)
			</li><li xmlns="">
				Plugable Decorators to really make designer's job easy (Example: transform <code class="literal">&lt;input type="text"/&gt;</code> to <code xmlns="" class="literal">&lt;h:inputText/&gt;</code> at compile time)
			</li><li xmlns="">
				Works with any <code class="literal">RenderKit</code></li><li xmlns="">
				Facelet APIs aren't dependent on a Web Container
			</li></ul></div><p>
			Everyone wants to be more designer friendly, and Tapestry seems to be the only choice developers are pursuing. On the other hand, JSF is the standard everyone would like to have happen, but JSF needs a more "pluggable" <code class="literal">ViewHandler</code> framework that is both designer and developer friendly.
		</p><p>
			Out of the box, Facelets provides full support for all components specified in the JavaServer Faces specification, including limited support for JSTL tags such as <code class="literal">&lt;c:forEach&gt;</code> and <code class="literal">&lt;c:if&gt;</code>.  Where developers really gain an advantage with using Facelets is its ability to auto-wire additional artifacts to your XML documents such as <code class="literal">UIComponents</code>, <code class="literal">Validators</code>, and <code class="literal">Converters</code>.
		</p><p>
			Facelets is a clean slate for correcting concerns with JSF. Templating, re-use, and ease of development are top priorities that will help bring developers on board with JSF as a suitable platform for large scale projects.
		</p></div><div class="preface" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="guide" />Documentation Guide</h2></div></div><div /></div><p>
			To get a jump start on development, this guide covers varying degrees of depth.  Please follow these steps:
		</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#gettingstarted" title="Chapter 1. Getting Started with Facelets">Chapter 1, <i>Getting Started with Facelets</i></a> as an entry-level tutorial on using JavaServer Faces and Facelets together.</p></li><li><p><a href="#config" title="Chapter 2. Configuration">Chapter 2, <i>Configuration</i></a> for details on setting up your web application for use with Facelets.</p></li><li><p><a href="#taglib" title="Chapter 3. Tag Libraries">Chapter 3, <i>Tag Libraries</i></a> for incorporating JSF objects into Facelet documents as tags.</p></li><li><p><a href="#template" title="Chapter 4. Templating and Re-Use">Chapter 4, <i>Templating and Re-Use</i></a> to learn about how Facelets encourages templating and re-use in your documents.</p></li><li><p><a href="#architecture" title="Chapter 5. Facelets Architecture">Chapter 5, <i>Facelets Architecture</i></a> as an overview to the Facelets API and compiler.</p></li><li><p><a href="#dev" title="Chapter 6. Extending Facelets">Chapter 6, <i>Extending Facelets</i></a> as a starting point for extending Facelets functionality with custom tag handlers.</p></li></ul></div><p>
			Additional documentation and resources such as: mailing lists, forums, and announcements, are available on Facelets' home page at:
		</p><div class="itemizedlist"><ul type="disc"><li><p>http://facelets.dev.java.net</p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="gettingstarted" />Chapter 1. Getting Started with Facelets</h2></div></div><div /></div><div class="preface" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="gettingstarted-goals" />Tutorial Goals</h2></div></div><div /></div><p>
			This section will walk you through creating a simple Number Guess web application.  Familiarity with Java Web Applications is required along with some knowledge of JavaServer Faces.  For those who are new to those technologies, you can browse:
		</p><div class="itemizedlist"><ul type="disc"><li><p>Java Web Applications - http://www.onjava.com/pub/a/onjava/2001/03/15/tomcat.html</p></li><li><p>JavaServer Faces - http://java.sun.com/j2ee/javaserverfaces/</p></li></ul></div><p>
			The steps in this tutorial are as follows:
		</p><div class="orderedlist"><ol type="1"><li><p><a href="#gettingstarted-download" title="1.1. Downloading Facelets">Section 1.1, “Downloading Facelets”</a> for downloading Facelets binaries or for accessing Facelets source code from CVS.</p></li><li><p><a href="#gettingstarted-dependencies" title="1.2. Dependencies">Section 1.2, “Dependencies”</a> will provide an overview of libraries needed to use JavaServer Faces with Facelets</p></li><li><p><a href="#gettingstarted-layout" title="1.3. Directory Structure">Section 1.3, “Directory Structure”</a> shows the familiar directory structure you should use for this tutorial</p></li><li><p><a href="#gettingstarted-setup" title="1.4. Project Setup">Section 1.4, “Project Setup”</a> has initial configuration settings you need to get up and running</p></li><li><p><a href="#gettingstarted-bean" title="1.5. The NumberBean">Section 1.5, “The NumberBean”</a> details the one JavaBean our tutorial requires and how to use it in JavaServer Faces</p></li><li><p><a href="#gettingstarted-view" title="1.6. Creating Web Pages">Section 1.6, “Creating Web Pages”</a> shows how to create and use a template within JavaServer Faces components</p></li><li><p><a href="#gettingstarted-nav" title="1.7. Handling Navigation">Section 1.7, “Handling Navigation”</a> includes how to tie your views together</p></li><li><p><a href="#gettingstarted-deploy" title="1.8. Deployment">Section 1.8, “Deployment”</a> finishes off the tutorial with deploying your application</p></li></ol></div><p>
			While this tutorial is a little basic for some, you may want to jump back to <a href="#guide" title="Documentation Guide">Documentation Guide</a> for direction.
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingstarted-download" />1.1. Downloading Facelets</h2></div></div><div /></div><p>
			Facelets is currently available as a sub-project of the JavaServer Faces Reference Implementation on Java.net (http://facelets.dev.java.net/).  You have a couple options for downloading Facelets:
		</p><div class="itemizedlist"><ul type="disc"><li>
				Download a release binary from http://facelets.dev.java.net/servlets/ProjectDocumentList.  Once downloaded, unzip the project into an appropriate folder.
			</li><li><p>
					If you are a member of Java.net, you may checkout Facelets from CVS.  Make sure you are located in the appropriate directory and use the following CVS commands (Replace <code class="literal">USER_NAME</code> with your Java.net Member Login Name):
				</p><div class="orderedlist"><ol type="1"><li><code class="literal">cvs -d :pserver:USER_NAME@cvs.dev.java.net:/cvs login</code></li><li xmlns=""><code class="literal">cvs -d :pserver:USER_NAME@cvs.dev.java.net:/cvs checkout facelets</code></li></ol></div><p xmlns="">
					More information on accessing Java.net's CVS repository is located at http://facelets.dev.java.net/servlets/ProjectSource. 
				</p></li></ul></div><p>
			See <a href="#building" title="Chapter 7. Building Facelets">Chapter 7, <i>Building Facelets</i></a> for more information on building Facelets from source (specifically if you used CVS).
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingstarted-dependencies" />1.2. Dependencies</h2></div></div><div /></div><p>
			Facelets will work with both version 1.1 and 1.2 of JavaServer Faces and makes no bearing on the implementation used.  Facelets also uses the new EL-API and again can be used with any implementation of that API.  Please reference the table below to make sure your dependencies are available to Facelets:
		</p><div class="table"><a id="N10109" /><p class="title"><b>Table 1.1. Facelets Dependencies</b></p><table xmlns="" summary="Facelets Dependencies" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>Project</th><th>Build Req?</th><th>Included?</th><th>Description</th><th>Link</th></tr></thead><tbody><tr><td>JavaServer Faces RI</td><td>No</td><td>No</td><td>The reference implementation of JSF 1.1 and JSF 1.2 are available for use with your application.</td><td>http://javaserverfaces.dev.java.net/</td></tr><tr><td>Apache MyFaces</td><td>No</td><td>No</td><td>The alternative to the JSF reference implementation.  MyFaces currently implements the JSF 1.1 specification.</td><td>http://myfaces.apache.org/</td></tr><tr><td>JavaServer Faces 1.2 API</td><td>Yes</td><td>No</td><td>JSF 1.2 API that works with the new EL Specification.  This API is packaged with the JavaServer Faces RI and available on Java.net.</td><td>http://javaserverfaces.dev.java.net/</td></tr><tr><td>EL API</td><td>Yes</td><td>Yes</td><td>The standardized EL specification that is standalone from JSP or JSF, but used by both frameworks.</td><td>http://glassfish.dev.java.net/</td></tr><tr><td>EL RI</td><td>No</td><td>Yes</td><td>The reference implementation that is used by Facelets for handling EL.</td><td>http://glassfish.dev.java.net/</td></tr><tr><td>XML SAX</td><td>Yes</td><td>No</td><td>This dependency should not be an issue for most deployments as it's a standard part of web containers and JREs.</td><td>http://java.sun.com/xml/</td></tr></tbody></table></div><p>
			For more information on using these projects:
		</p><div class="itemizedlist"><ul type="disc"><li><p>
					Those projects that are required to build Facelets, please see <a href="#building" title="Chapter 7. Building Facelets">Chapter 7, <i>Building Facelets</i></a>.
				</p></li><li><p>
					If you would like to use Apache MyFaces with Facelets, see <a href="#config-faces-apache" title="2.1.2. Apache MyFaces">Section 2.1.2, “Apache MyFaces”</a>.
				</p></li><li><p>
					To use Facelets with the JavaServer Faces Reference Implementation, see <a href="#config-faces-ri" title="2.1.1. JavaServer Faces RI">Section 2.1.1, “JavaServer Faces RI”</a>.
				</p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingstarted-layout" />1.3. Directory Structure</h2></div></div><div /></div><p>
			Since we are putting together a sample web application, your project should have the following directory structure (presumes JSF RI use):
		</p><pre class="programlisting">$DEPLOY_DIR
+- /WEB-INF
   +- /classes
   +- /lib
      +- /jsf-facelets.jar
      +- /el-api.jar
      +- /el-ri.jar
         [jsf implementation dependencies]
      +- /jsf-api.jar
      +- /jsf-impl.jar
      +- /commons-digester.jar
      +- /commons-logging.jar
      +- /commons-collections.jar
      +- /commons-beanutils.jar
   +- /web.xml
   +- /faces-config.xml
+- /[xhtml documents]
</pre><p>
			For more information on web application deployments in general, there is additional documentation at http://java.sun.com/j2ee and at http://jakarta.apache.org/tomcat.
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingstarted-setup" />1.4. Project Setup</h2></div></div><div /></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gettingstarted-setup-web" />1.4.1. Web.xml Descriptor</h3></div></div><div /></div><p>
				First configure your application's <code class="literal">web.xml</code>.  Make sure that the <code class="literal">FacesServlet</code> is mapped and JSF's <code class="literal">javax.faces.DEFAULT_SUFFIX</code> initialization parameter is specified.  This standard initialization parameter lets JSF know what documents to use for specifying your views.
			</p><pre class="programlisting">&lt;web-app&gt;
		
  &lt;!-- Use Documents Saved as *.xhtml --&gt;	
  &lt;context-param&gt;
    &lt;param-name&gt;javax.faces.DEFAULT_SUFFIX&lt;/param-name&gt;
    &lt;param-value&gt;.xhtml&lt;/param-value&gt;
  &lt;/context-param&gt;
	  
  &lt;!-- Optional JSF-RI Parameters to Help Debug --&gt;
  &lt;context-param&gt;
    &lt;param-name&gt;com.sun.faces.validateXml&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
  &lt;/context-param&gt;
  &lt;context-param&gt;
    &lt;param-name&gt;com.sun.faces.verifyObjects&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
  &lt;/context-param&gt;
	  
  &lt;!-- Faces Servlet --&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
  &lt;/servlet&gt;
	  
  &lt;!-- Faces Servlet Mapping --&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.jsf&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
	  
&lt;/web-app&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gettingstarted-setup-faces" />1.4.2. Faces-Config.xml</h3></div></div><div /></div><p>
				JavaServer Faces is extremely interoperable with other frameworks.  Most of this flexibility lies in JSF's <code class="literal">Application</code> composite which includes: a default <code class="literal">ActionListener</code>, <code class="literal">ELResolver</code>, <code class="literal">StateManager</code>, <code class="literal">NavigationHandler</code>, and <code class="literal">ViewHandler</code>.  Facelets is used as the application's <code class="literal">ViewHandler</code>, represented by the class <code class="literal">com.sun.facelets.FaceletViewHandler</code>.
			</p><p>
				To configure JavaServer Faces to use Facelets as the <code class="literal">ViewHandler</code>, modify your project's <code class="literal">faces-config.xml</code> to specify the <code class="literal">&lt;view-handler&gt;</code> element:
			</p><pre class="programlisting">&lt;faces-config&gt;		
  &lt;application&gt;
    &lt;view-handler&gt;
      com.sun.facelets.FaceletViewHandler
    &lt;/view-handler&gt;    
  &lt;/application&gt; 
&lt;/faces-config&gt;</pre><p>
				Even though there are other parts to the <code class="literal">faces-config.xml</code> needed for this tutorial, only the <code class="literal">&lt;view-handler&gt;</code> element is required for Facelets use.
			</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingstarted-bean" />1.5. The NumberBean</h2></div></div><div /></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gettingstarted-bean-java" />1.5.1. The Java Code</h3></div></div><div /></div><p>
				We will have a simple, straight-forward JavaBean that will act as our 'controller' for our NumberGuess tutorial.  Note that the desired class name will be <code class="literal">tutorial.NumberBean</code>.
			</p><pre class="programlisting">package tutorial;

import java.io.Serializable;

import java.util.Random;

import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.validator.ValidatorException;

public class NumberBean implements Serializable {

  protected final static Random rand = new Random();

  protected int min;
  protected int max;
  protected int guess;
  protected int actual;
    
  // Default Constructor
  public NumberBean() {
    this.min = 1;
    this.max = 10;
  }
   
  // called by JSF to validate user input
  public void validate(FacesContext context, UIComponent component, Object value)
      throws ValidatorException {
      
    // coerce the value to an int
    try {
      int param = Integer.parseInt(value.toString());
    
      // validate param
      if (param &gt; this.max || param &lt; this.min) {
          FacesMessage msg = new FacesMessage("Guess must be between "+this.min+" and "+this.max);
          throw new ValidatorException(msg);
      }
    } catch (NumberFormatException e) {
      FacesMessage msg = new FacesMessage("Must be a number");
      throw new ValidatorException(msg);
    }
  }
    
  // lazy generate our actual value
  public synchronized int getActual() {
    if (this.actual == 0) {
        this.actual = rand.nextInt(this.max-this.min);
        this.actual += this.min;
    }
    return this.actual;
  }
  
  // our message for the response
  public String getMessage() {    
    if (this.guess == this.getActual()) {
      return "Sweet, you got it right!";
    } else if (this.guess &lt; this.getActual()) {
      return "Sorry, try something higher";
    } else {
      return "Too bad, go lower";
    }
  }
  
  // other bean properties
  public int getMin() { return this.min; }
  public int getMax() { return this.max; }
  public int getGuess() { return this.guess; }
    
  public void setMin(int min) { this.min = min; }
  public void setMax(int max) { this.max = max; }
  public void setGuess(int guess) { this.guess = guess; }
    
}</pre><p>
				The above class should be compiled with Java and located at <code class="literal">$DEPLOY_DIR/WEB-INF/classes/tutorial/NumberBean.class</code>.  If you do not know how to compile Java classes, please stop this tutorial and go to http://java.sun.com for introductory help.
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gettingstarted-bean-config" />1.5.2. Faces Bean Descriptor</h3></div></div><div /></div><p>
				You can map JavaBeans into your JavaServer Faces application via the <code class="literal">faces-config.xml</code>.  JavaBeans used in your application can be wired together by bean properties and can be provided scope: a single <code class="literal">request</code>, a whole <code class="literal">session</code> visit, for everyone in the <code class="literal">application</code>, or <code class="literal">none</code> if you don't want it stored directly.
			</p><pre class="programlisting">&lt;faces-config&gt;
			
  &lt;!-- from project setup --&gt;
  &lt;application&gt;
    &lt;view-handler&gt;
      com.sun.facelets.FaceletViewHandler
    &lt;/view-handler&gt;    
  &lt;/application&gt;
  
  &lt;!-- our NumberBean we just created --&gt;
  &lt;managed-bean&gt;
    &lt;managed-bean-name&gt;NumberBean&lt;/managed-bean-name&gt;
    &lt;managed-bean-class&gt;tutorial.NumberBean&lt;/managed-bean-class&gt;
    &lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;
    &lt;managed-property&gt;
      &lt;property-name&gt;min&lt;/property-name&gt;
      &lt;value&gt;1&lt;/value&gt;
    &lt;/managed-property&gt;
    &lt;managed-property&gt;
      &lt;property-name&gt;max&lt;/property-name&gt;
      &lt;value&gt;10&lt;/value&gt;
    &lt;/managed-property&gt;
  &lt;/managed-bean&gt;

&lt;/faces-config&gt;</pre></div><p>
			The <code class="literal">&lt;managed-bean&gt;</code> element above tells JSF to guarantee a <code class="literal">tutorial.NumberBean</code> is available under the attribute name <code class="literal">NumberBean</code> in the user's <code class="literal">session</code>.  In addition, we've allowed our <code class="literal">NumberBean</code> to be configured by setting the <code class="literal">min</code> and <code class="literal">max</code> values a user can guess.  It should be noted that JavaServer Faces will lazy load our <code class="literal">NumberBean</code> when it's first accessed by our application.
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingstarted-view" />1.6. Creating Web Pages</h2></div></div><div /></div><p>
			Facelets emphasizes its ability to template content in your application.  Templating promotes re-use and eases long term maintenance of your application, allowing content to be changed in one spot, but used in multiple pages.  While using templating features wouldn't be necessary for this simple application, it does serve as a tutorial.  For more information on this topic, see <a href="#template" title="Chapter 4. Templating and Re-Use">Chapter 4, <i>Templating and Re-Use</i></a>.
		</p><p>
			We will create three documents: a template page, a page for user input, and finally a page to display a response:
		</p><pre class="programlisting">$DEPLOY_DIR
+- /WEB-INF
   [newly added pages below]
+- /template.xhtml
+- /guess.xhtml
+- /response.xhtml
</pre><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gettingstarted-view-template" />1.6.1. The Page Template - template.xhtml</h3></div></div><div /></div><p>
				Facelets comes with a library of UI (user interface) tags to use in writing your application.  We will only focus on using a couple of them in creating a page called <code class="literal">template.xhtml</code>.
			</p><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /&gt;
&lt;title&gt;Facelets: Number Guess Tutorial&lt;/title&gt;
&lt;style type="text/css"&gt;
&lt;!--
body {
  font-family: Verdana, Arial, Helvetica, sans-serif;
  font-size: small;
}
--&gt;
&lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;h1&gt;
  &lt;ui:insert name="title"&gt;Default Title&lt;/ui:insert&gt;
&lt;/h1&gt;
&lt;p&gt;
  &lt;ui:insert name="body"&gt;Default Body&lt;/ui:insert&gt;
&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</pre><p>
				Facelets requires valid XML markup.  Our sample application is using valid XHTML since these documents will be used on the web. You can even view this document within your favorite visual tool.  A couple things to take notice of:
			</p><div class="orderedlist"><ol type="1"><li><p>Use of proper namespaces such as <code class="literal">xmlns:ui="http://java.sun.com/jsf/facelet"</code> to specify tag libraries loaded by Facelets.  In this example, we are declaring that Facelet's own UI library of tags will be prefixed with a <code class="literal">ui</code>.  Namespace definitions need to be specified before you use a tag from that library, otherwise Facelets will properly error when it compiles your document.</p></li><li><p><code class="literal">&lt;ui:insert&gt;</code> is used to declare parts of the document that can be inserted or overwritten.  If a document doesn't override the insertion point with the specified name (<code class="literal">title</code> or <code class="literal">body</code>), then the default text from the original template is used.</p></li></ol></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gettingstarted-view-guess" />1.6.2. Configuring User Input - guess.xhtml</h3></div></div><div /></div><p>
				In this example page, we will incorporate components from the JavaServer Faces standard component libraries.
			</p><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"&gt;
&lt;body&gt;

This text above will not be displayed.

&lt;ui:composition template="/template.xhtml"&gt;

  &lt;ui:define name="title"&gt;
    I'm thinking of a number from #{NumberBean.min} to #{NumberBean.max}.  Can you guess it?
  &lt;/ui:define&gt;
  
  &lt;ui:define name="body"&gt;
    &lt;h:form id="helloForm"&gt;
      &lt;h:inputText type="text" id="userNo" value="#{NumberBean.guess}" validator="#{NumberBean.validate}"/&gt;
      &lt;br/&gt;
      &lt;h:commandButton type="submit" id="submit" action="success" value="Submit" /&gt;
      &lt;br/&gt;
      &lt;h:message showSummary="true" showDetail="false" style="color: red; font-weight: bold;" id="errors1" for="userNo"/&gt;
    &lt;/h:form&gt;
  &lt;/ui:define&gt;
  
&lt;/ui:composition&gt;

This text below will also not be displayed.

&lt;/body&gt;
&lt;/html&gt;</pre><div class="orderedlist"><ol type="1"><li><p>Using a <code class="literal">&lt;ui:composition&gt;</code> tag will trim everything outside of it.  This means that you can create/edit your documents with a visual editor, but Facelets will only use what's between the <code class="literal">&lt;ui:composition&gt;</code> tags.</p></li><li><p>The <code class="literal">&lt;ui:composition&gt;</code> uses the <code class="literal">template</code> attribute to reference the template or look and feel of this page.</p></li><li><p>Two <code class="literal">&lt;ui:define&gt;</code> tags are specified with names that match the ones used in the template we had created.  This means that when Facelets builds your page, those blocks of content will be placed appropriately in the template.</p></li><li><p>Facelets also can use 'inlined' EL Expressions to make outputting dynamic content extremely easy.  In the example above, <code class="literal">#{NumberBean.max}</code> will display the <code class="literal">max</code> property of the <code class="literal">NumberBean</code> in your session.</p></li></ol></div><p>
			If you have questions or do not understand the attributes used for <code class="literal">&lt;h:inputText&gt;</code>, <code class="literal">&lt;h:commandButton&gt;</code>, or <code class="literal">&lt;h:message&gt;</code>; documentation on those components are available at http://java.sun.com/j2ee/javaserverfaces.  Keep in mind that Facelets uses the same attributes, behavior, and naming conventions as the tags specified for JavaServer Faces' JSP TLD documents.
		</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gettingstarted-view-response" />1.6.3. Displaying the Response - response.xhtml</h3></div></div><div /></div><p>
				Finally, if a user entered valid input as specified by the <code class="literal">NumberBean.validate</code> method, then we need a page to give them feedback on their guess.
			</p><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"&gt;
&lt;body&gt;

&lt;ui:composition template="/template.xhtml"&gt;

  &lt;ui:define name="title"&gt;
    #{NumberBean.message}
  &lt;/ui:define&gt;
  
  &lt;ui:define name="body"&gt;
    &lt;form jsfc="h:form"&gt;
    &lt;input jsfc="h:commandButton" type="submit" id="back" value="Back" action="success"/&gt;
    &lt;/form&gt;
  &lt;/ui:define&gt;
  
&lt;/ui:composition&gt;

&lt;/body&gt;
&lt;/html&gt;</pre><div class="orderedlist"><ol type="1"><li><p>Again we use an <code class="literal">&lt;ui:composition&gt;</code> to trim unecessary content from our page and use the <code class="literal">template.xhtml</code>.</p></li><li><p>We also introduced the <code class="literal">jsfc</code> attribute which allows the XHTML tags to be compiled into <code class="literal">&lt;h:form&gt;</code> and <code class="literal">&lt;h:commandButton&gt;</code> when the page is compiled.  This means that a designer's visual editor will render a normal form and button, but it will be transformed into a dynamic <code class="literal">UIComponent</code> when compiled by Facelets.</p></li></ol></div><p>
				That's it for the pages.  Again, if you have questions about JavaServer Faces components or would like some additional background, visit http://java.sun.com/j2ee/javaserverfaces
			</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingstarted-nav" />1.7. Handling Navigation</h2></div></div><div /></div><p>
			We would like to tie our two pages together from <code class="literal">guess.xhtml</code> to <code class="literal">response.xhtml</code> and back again.  To do this, we need to go back into the <code class="literal">faces-config.xml</code> to specify navigation cases.
		</p><pre class="programlisting">&lt;faces-config&gt;
			
  &lt;!-- from project setup --&gt;
  &lt;application&gt;
    &lt;view-handler&gt;
      com.sun.facelets.FaceletViewHandler
    &lt;/view-handler&gt;    
  &lt;/application&gt;
  
  &lt;!-- our NumberBean we created before --&gt;
  &lt;managed-bean&gt;
    &lt;managed-bean-name&gt;NumberBean&lt;/managed-bean-name&gt;
    &lt;managed-bean-class&gt;tutorial.NumberBean&lt;/managed-bean-class&gt;
    &lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;
    &lt;managed-property&gt;
      &lt;property-name&gt;min&lt;/property-name&gt;
      &lt;value&gt;1&lt;/value&gt;
    &lt;/managed-property&gt;
    &lt;managed-property&gt;
      &lt;property-name&gt;max&lt;/property-name&gt;
      &lt;value&gt;10&lt;/value&gt;
    &lt;/managed-property&gt;
  &lt;/managed-bean&gt;
  
  &lt;!-- going from guess.xhtml to response.xhtml --&gt;
  &lt;navigation-rule&gt;
    &lt;from-view-id&gt;/guess.xhtml&lt;/from-view-id&gt;
    &lt;navigation-case&gt;
      &lt;from-outcome&gt;success&lt;/from-outcome&gt;
      &lt;to-view-id&gt;/response.xhtml&lt;/to-view-id&gt;
    &lt;/navigation-case&gt;
  &lt;/navigation-rule&gt;

  &lt;!-- going from response.xhtml to guess.xhtml --&gt;
  &lt;navigation-rule&gt;
    &lt;from-view-id&gt;/response.xhtml&lt;/from-view-id&gt;
    &lt;navigation-case&gt;
        &lt;from-outcome&gt;success&lt;/from-outcome&gt;
      &lt;to-view-id&gt;/guess.xhtml&lt;/to-view-id&gt;
    &lt;/navigation-case&gt;
  &lt;/navigation-rule&gt;

&lt;/faces-config&gt;</pre><p>
			In both pages, we included <code class="literal">commandButtons</code> in some form with <code class="literal">action</code> attributes specified.  The <code class="literal">action</code> attribute is mapped to the <code class="literal">&lt;from-outcome&gt;</code> element in your <code class="literal">faces-config.xml</code>.  This method of handling navigation is extremely flexible and more information on this aspect of JavaServer Faces is included at http://java.sun.com/j2ee/javaserverfaces.
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gettingstarted-deploy" />1.8. Deployment</h2></div></div><div /></div><p>
			Finally, you should be able to deploy all of these artifacts now to your web application.  Your application should generate a random number and allow you to flip between your <code class="literal">guess</code> page and <code class="literal">response</code> page.  To access your application, remember that the <code class="literal">javax.faces.web.FacesServlet</code> in your <code class="literal">web.xml</code> was mapped to <code class="literal">*.jsf</code>.  To start your guessing fun, point your browser to <code class="literal">http://localhost:8080/numberguess/guess.jsf</code> (presuming you used the application name <code class="literal">numberguess</code>).
		</p><p>
			If you have additional problems or questions, going to Facelet's home page at http://facelets.dev.java.net will provide you with additional resources such as forums, mailing lists, and additional documentation.
		</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="config" />Chapter 2. Configuration</h2></div></div><div /></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="config-faces" />2.1. Configuring JavaServer Faces</h2></div></div><div /></div><p>
			Facelets comes with an extensible <code class="literal">ViewHandler</code>.  This is the only necessary integration point within your <code class="literal">faces-config.xml</code>.			
		</p><pre class="programlisting">&lt;faces-config&gt;		
  &lt;application&gt;
    &lt;view-handler&gt;
      com.sun.facelets.FaceletViewHandler
    &lt;/view-handler&gt;    
  &lt;/application&gt; 
&lt;/faces-config&gt;</pre><p>
			The <code class="literal">FaceletViewHandler</code> utilizes several <code class="literal">&lt;context-param&gt;</code> declarations in your <code class="literal">web.xml</code> which are detailed in <a href="#config-webapp-init" title="2.2.1. Initialization Parameters">Section 2.2.1, “Initialization Parameters”</a>.
		</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="config-faces-ri" />2.1.1. JavaServer Faces RI</h3></div></div><div /></div><p>
				See <a href="#gettingstarted" title="Chapter 1. Getting Started with Facelets">Chapter 1, <i>Getting Started with Facelets</i></a> for a tutorial that uses JavaServer Faces RI as an example.  More information on the JSF RI is available at:
			</p><div class="itemizedlist"><ul type="disc"><li><p>http://javaserverfaces.dev.java.net</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="config-faces-apache" />2.1.2. Apache MyFaces</h3></div></div><div /></div><p>
				Apache MyFaces has it's own version of the JavaServer Faces API included in its distribution.  Currently, Apache MyFaces is only up to the 1.1 specification, but has not yet passed the TCK.
			</p><div class="itemizedlist"><ul type="disc"><li><p>http://myfaces.apache.org</p></li></ul></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="config-webapp" />2.2. Web Application Descriptors</h2></div></div><div /></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="config-webapp-init" />2.2.1. Initialization Parameters</h3></div></div><div /></div><p>
				  These parameters help with development and increase the flexibility of Facelet use.
			</p><div class="table"><a id="N10372" /><p class="title"><b>Table 2.1. Web.xml Parameter List</b></p><table xmlns="" summary="Web.xml Parameter List" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Parameter Name</th><th>Default Value</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>facelets.LIBRARIES</td><td> </td><td>A semicolon (<code class="literal">;</code>) delimitted list of paths to Facelet tag libraries, relative to your application's root.  These libraries will be loaded when the first request hits the <code xmlns="" class="literal">FaceletViewHandler</code> for page compilation.</td><td xmlns="">/WEB-INF/facelets/foo.taglib.xml; /WEB-INF/facelets/bar.taglib.xml</td></tr><tr><td>facelets.REFRESH_PERIOD</td><td>2</td><td>When a page is requested, what interval in <code class="literal">seconds</code> should the compiler check for changes.  If you don't want the compiler to check for changes once the page is compiled, then use a value of <code xmlns="" class="literal">-1</code>. Setting a low refresh period helps during development to be able to edit pages in a running application.</td><td xmlns="">-1</td></tr><tr><td>facelets.VIEW_MAPPINGS</td><td> </td><td>A semicolon (<code class="literal">;</code>) delimitted list of resources that Facelets should use.  If no resource paths are specified, Facelets will handle all requests (DEFAULT). If one or more paths are specified, Facelets will only use the ones specified, otherwise fall back on the parent or default <code xmlns="" class="literal">ViewHandler</code> (JSP).  Note, this requires the FacesServlet in your <code xmlns="" class="literal">web.xml</code> to be mapped with a prefix for capturing multiple file types ex: <code xmlns="" class="literal">/faces/*</code>.</td><td xmlns="">/demos/*; *.xhtml</td></tr></tbody></table></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="config-webapp-security" />2.2.2. Security</h3></div></div><div /></div><p>
				Java applications can restrict access to resources or pages by outside users.  This feature is common to all application servers and part of the Servlet specification.
			</p><p>
				Lets presume that you want to take advantage of developing simple Facelet XHTML documents that are viewable in your browser during development.  When your application is deployed to production, you don't want anyone from the outside to access your XHTML documents unless they are served through the JavaServer Faces Servlet.
			</p><pre class="programlisting">&lt;web-app&gt;
			
  &lt;!-- servlets and such would be above --&gt;

  &lt;security-constraint&gt;	 
    &lt;display-name&gt;Restrict XHTML Documents&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
      &lt;web-resource-name&gt;XHTML&lt;/web-resource-name&gt;
      &lt;url-pattern&gt;*.xhtml&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
      &lt;description&gt;Only Let 'developer's access XHTML pages&lt;/description&gt;
      &lt;role-name&gt;developer&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
  &lt;/security-constraint&gt;

&lt;/web-app&gt;</pre><p>
				You can read more about Security in the Web Tier at http://java.sun.com/webservices/docs/1.3/tutorial/doc/Security2.html
			</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="config-logging" />2.3. Logging</h2></div></div><div /></div><p>
			Facelets uses <code class="literal">java.util.Logger</code> for handling logging.  This was done to reduce library dependencies while taking advantage of many Servlet container's ability to modify logging levels on the fly.
		</p><p>
			For many, using the JDK 1.4 <code class="literal">java.util.Logger</code> will be new to them.  You can read more on it at http://java.sun.com/j2se/1.4.2/docs/guide/util/logging/index.html
		</p><div class="table"><a id="N103D8" /><p class="title"><b>Table 2.2. Facelet Logger Names</b></p><table xmlns="" summary="Facelet Logger Names" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>facelets.compiler</td><td>For outputting debug information about the compilation process.  This would include namespace resolution for TagLibraries and XML events.  Most of the output will be <code class="literal">FINE</code>.</td></tr><tr xmlns=""><td>facelets.factory</td><td>Information about the inner workings of the <code class="literal">FaceletFactory</code>.</td></tr><tr xmlns=""><td>facelets.tag.component</td><td>Debug information that helps with component lifecycles in relation to Facelets.</td></tr><tr><td>facelets.viewhandler</td><td>Will output view-id mapping/resolution and the states of your views.</td></tr></tbody></table></div><p>
			For those who are currently developing a Facelets project and would like to have all the debug information available on both your application server and in your IDE; modify the <code class="literal">logging.properties</code> in your <code class="literal">JRE/lib</code> directory and add the following lines to the end of that file:
		  </p><pre class="programlisting">facelets.level = FINEST

# uncomment any of the below

#facelets.compiler.level = SEVERE
#facelets.tag.component.level = INFO
#facelets.viewhandler.level = SEVERE</pre></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="taglib" />Chapter 3. Tag Libraries</h2></div></div><div /></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="taglib-use" />3.1. Using Tags</h2></div></div><div /></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-use-normal" />3.1.1. Tag Namespaces</h3></div></div><div /></div><p>
				Facelets uses valid XML with namespace support for compilation.  If you are new to XML, there are great resources online, such as http://www.w3schools.com.  To use a library of tags, you would 'include' the library by declaring a namespace.  Declaring a namespace involves using the library's URI (or URL) and mapping it to a prefix.
			</p><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"&gt;
      
&lt;body&gt;
  &lt;h:inputText value="#{hello.world}"/&gt;
&lt;/body&gt;

&lt;/html&gt;</pre><p>
			In the example above, we've declared 2 namespaces:
		</p><div class="itemizedlist"><ul type="disc"><li><p><code class="literal">xmlns="http://www.w3.org/1999/xhtml"</code> Says every tag without a prefix, such as <code class="literal">&lt;body&gt;</code>, are part of XHTML.</p></li><li><p><code class="literal">xmlns:h="http://java.sun.com/jsf/html"</code> Maps the prefix <code class="literal">h:</code> to the JSF HTML library.</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-use-jsfc" />3.1.2. Using 'jsfc'</h3></div></div><div /></div><p>
				Facelets provides you the ability to have one XML element in the page be converted to another at compile time by specifying the <code class="literal">jsfc</code> attribute.
			</p><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"&gt;
      
&lt;body&gt;
  &lt;input type="text" jsfc="h:inputText" value="#{hello.world}" /&gt;
&lt;/body&gt;

&lt;/html&gt;</pre><p>
				The <code class="literal">&lt;input&gt;</code> tag above is readable/displayable in browsers and visual tools as a normal text field.  It would be nice to use that same text field in JavaServer Faces, so we provide the <code class="literal">jsfc="h:inputText"</code>.  This declaration tells the compiler to resolve the <code class="literal">&lt;input&gt;</code> tag as an <code class="literal">&lt;h:inputText&gt;</code> (the same as above).  Note, the same rules for namespaces and naming apply to the value of the <code class="literal">jsfc</code> attribute.
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-use-unresolved" />3.1.3. Unresolved Namespaces</h3></div></div><div /></div><p>
				Any namespace that is unresolved and/or the tag's name is not found in any library, then it is treated as regular text.  If your tag or component isn't showing up in your rendered page, check the source of page and see if the tag was simply ignored.  This usually means you either misspelled the tag's name or you are using the wrong namespace for your library.
			</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="taglib-available" />3.2. Available Tag Libraries</h2></div></div><div /></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-available-spec" />3.2.1. JavaServer Faces Specification</h3></div></div><div /></div><p>
				Facelets comes with support for all tags (components) included in the JavaServer Faces Specification.  Great care was taken to mimic the specification's JSP tag counterparts to leverage existing knowledge and available documentation.  For development, you may reference the 'Tag Library Documentation' at:
			</p><div class="itemizedlist"><ul type="disc"><li>http://java.sun.com/j2ee/javaserverfaces/reference/api/index.html</li></ul></div><div class="table"><a id="N1046B" /><p class="title"><b>Table 3.1. Specification Tag Libraries</b></p><table xmlns="" summary="Specification Tag Libraries" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Namespace</th><th>Description</th></tr></thead><tbody><tr><td>http://java.sun.com/jsf/core</td><td>The core JavaServer Faces custom actions that are independent of any RenderKit used.</td></tr><tr><td>http://java.sun.com/jsf/html</td><td>This tag library contains JavaServer Faces component tags for all UIComponent + HTML RenderKit Renderer combinations defined in the JavaServer Faces Specification.</td></tr></tbody></table></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-available-ui" />3.2.2. Templating Library</h3></div></div><div /></div><p>
				TODO (link to full section)
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-available-jstl" />3.2.3. JSTL Support</h3></div></div><div /></div><p>
				TODO (limited)
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-available-adf" />3.2.4. Oracle ADF Faces</h3></div></div><div /></div><p>
				TODO
			</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="taglib-function" />3.3. Functions</h2></div></div><div /></div><p>
			As part of the EL Specification, you can incorporate <code class="literal">static</code> Java methods into your documents.  The JSTL library already has some of these functions available, see <a href="#taglib-available-jstl" title="3.2.3. JSTL Support">Section 3.2.3, “JSTL Support”</a>.
		</p><p>
			Functions are declared within EL in the following format: <code class="literal">#{fn:sizeOf(myCollection)}</code>.  What that line says is to reference the tag library using the prefix <code class="literal">fn</code> for a function named <code class="literal">sizeOf</code>.  This syntax should feel similar to what's required for using tags from imported libraries.
		</p><p>
			Any tag library can offer any amount of functions.  Please reference the particular library's documentation for function names and parameters information.
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="taglib-web" />3.4. Loading Libraries</h2></div></div><div /></div><p>
			Tag libraries can be loaded multiple ways.  First Facelets will load all libraries from your classpath (including packaged Jars) and then any libraries you have specified in your <code class="literal">web.xml</code>.
		</p><div class="itemizedlist"><ul type="disc"><li><p>
					When Facelets searches the classpath, it will attempt to load any file with the extension <code class="literal">*.taglib.xml</code> from the <code class="literal">/meta-inf</code> folder of your Jars.  For example, <code class="literal">/meta-inf/mycompany.taglib.xml</code> would be found by Facelets while <code class="literal">/mycompany.taglib.xml</code> and <code class="literal">/meta-inf/mycompany.xml</code> would not.  See <a href="#config-logging" title="2.3. Logging">Section 2.3, “Logging”</a> for information on recieving debug information on the libraries loaded.
				</p></li><li><p>
					Facelets will check for an initialization parameter from your <code class="literal">web.xml</code> and load all libraries specified there relative to your application's root. See <a href="#config-webapp-init" title="2.2.1. Initialization Parameters">Section 2.2.1, “Initialization Parameters”</a> for details on the parameter.  This is an ideal way to declare specialized tags for a particular application; tags that aren't necessarily distributed with code in Jars.
				</p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="taglib-create" />3.5. Creating Tag Libraries</h2></div></div><div /></div><div class="preface" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-create-overview" />Overview</h3></div></div><div /></div><p>
				Facelets allows you to configure custom tag libraries in a short amount of time.  This section will focus on defining tag libraries in XML which can be automatically loaded by Facelets compiler as described in <a href="#taglib-web" title="3.4. Loading Libraries">Section 3.4, “Loading Libraries”</a>.
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-create-schema" />3.5.1. Tag Library Schema</h3></div></div><div /></div><p>
				The schema (or DTD) for Facelets is extremely simple.  Future releases of Facelets will actually just use your <code class="literal">faces-config.xml</code> files the same way a visual tool would for determining required attributes and namespaces.
			</p><p>
				Facelets currently uses the following doc type:
			</p><pre class="programlisting">&lt;!DOCTYPE facelet-taglib PUBLIC
  "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
  "http://java.sun.com/dtd/facelet-taglib_1_0.dtd"&gt;</pre><p>
				This is the (simple) DTD that Facelets uses:
			</p><pre class="programlisting">&lt;!ELEMENT facelet-taglib (library-class|(namespace,(tag|function)+))&gt;
&lt;!ATTLIST facelet-taglib xmlns CDATA #FIXED "http://java.sun.com/JSF/Facelet"&gt;
&lt;!ELEMENT namespace (#PCDATA)&gt;
&lt;!ELEMENT library-class (#PCDATA)&gt;
&lt;!ELEMENT tag (tag-name,(handler-class|component|converter|validator|source))&gt;
&lt;!ELEMENT tag-name (#PCDATA)&gt;
&lt;!ELEMENT handler-class (#PCDATA)&gt;
&lt;!ELEMENT component (component-type,renderer-type?)&gt;
&lt;!ELEMENT component-type (#PCDATA)&gt;
&lt;!ELEMENT renderer-type (#PCDATA)&gt;
&lt;!ELEMENT converter (converter-id)&gt;
&lt;!ELEMENT converter-id (#PCDATA)&gt;
&lt;!ELEMENT validator (validator-id)&gt;
&lt;!ELEMENT validator-id (#PCDATA)&gt;
&lt;!ELEMENT source (#PCDATA)&gt;
&lt;!ELEMENT function (function-name,function-class,function-signature)&gt;
&lt;!ELEMENT function-name (#PCDATA)&gt;
&lt;!ELEMENT function-class (#PCDATA)&gt;
&lt;!ELEMENT function-signature (#PCDATA)&gt;</pre><p>
				As you can see, JSF entities are treated as first class citizens in Facelets' tag libraries.  A couple things to observe from the schema above:
			</p><div class="itemizedlist"><ul type="disc"><li><p>
					The definition of a tag library (including namespace) can be delegated to the class specified in the <code class="literal">library-class</code> element.  The class specified must implement <code class="literal">com.sun.facelets.tag.TagLibrary</code>.  This is useful if you would like to maintain your tag library in Java, but would like to have it automatically picked up by the compiler by placing an XML file in your Jar's <code class="literal">meta-inf</code> folder.
				</p></li><li><p>
					Each document (not specified by <code class="literal">library-class</code>) requires a <code class="literal">namespace</code> element which will match the namespace used in your document, see <a href="#taglib-use-normal" title="3.1.1. Tag Namespaces">Section 3.1.1, “Tag Namespaces”</a>.
				</p></li><li><p>
					The rest of the document is made up of <code class="literal">tag</code> and <code class="literal">function</code> elements.  Tag elements require a <code class="literal">tag-name</code> and can take on different behavior depending on what you would like Facelets to handle for you.  Functions can also be specified under the library's namespaces and follow the same signature as in JSP TLD files.
				</p></li></ul></div><p>
				The following sections describe how to integrate your objects within the XML tag library.
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-create-component" />3.5.2. UIComponents</h3></div></div><div /></div><p>
				<code class="literal">UIComponents</code> can be auto-wired by using the <code class="literal">component</code> element in your tag library.
			</p><pre class="programlisting">&lt;tag&gt;
  &lt;tag-name&gt;bar&lt;/tag-name&gt;
  &lt;component&gt;
    &lt;component-type&gt;com.mycompany.Data&lt;/component-type&gt;
    &lt;renderer-type&gt;com.mycompany.Bar&lt;/renderer-type&gt;
  &lt;/component&gt;
&lt;/tag&gt;</pre><p>
				In the above example, we are binding a component of type (not Class) <code class="literal">com.mycompany.Data</code> to the tag name <code class="literal">bar</code>.  A <code class="literal">renderer-type</code> is also provided, but not required since <code class="literal">UIComponents</code> can easily render themselves.
			</p><p>
				Based on if your component implements <code class="literal">ActionSource[2]</code>, <code class="literal">ValueHolder</code>, or <code class="literal">EditableValueHolder</code>, Facelets will take care of auto-wiring those standard attributes according to the specification.  This includes validators, EL expressions, converters, etc.  Any additional properties on your component will also be wired for you too, just as JSP sets the properties on a <code class="literal">JspTag</code>.  If you think that Facelets can't handle the special wiring your component needs, then skip to <a href="#taglib-create-custom" title="3.5.5. Custom Tags">Section 3.5.5, “Custom Tags”</a>.
			</p><p>
				If you've just created a <code class="literal">UIComponent</code> from scratch and you are not sure how to integrate it into JavaServer Faces, here's all the code you need:
			</p><pre class="programlisting">&lt;faces-config&gt;
  &lt;component&gt;
    &lt;component-type&gt;com.mycompany.Data&lt;/component-type&gt;
    &lt;component-class&gt;com.mycompany.jsf.components.UIDataComponent&lt;/component-class&gt;
  &lt;/component&gt;
&lt;/faces-config&gt;</pre><p>
				Notice that the <code class="literal">component-type</code> matches the one used in the Facelets tag library XML.  This degree of indirection by referencing components by type increases the maintainability and portability of JavaServer Faces components.
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-create-validator" />3.5.3. Validators</h3></div></div><div /></div><p>
				<code class="literal">Validators</code> can also be added to Facelets with the <code class="literal">validator</code> element.
			</p><pre class="programlisting">&lt;tag&gt;
  &lt;tag-name&gt;validateEmail&lt;/tag-name&gt;
  &lt;validator&gt;
    &lt;validator-id&gt;faces.validator.Email&lt;/validator-id&gt;
  &lt;/validator&gt;
&lt;/tag&gt;</pre><p>
				Again, we reference JSF entities by type or id.  Facelets will also take care of wiring properties directly to your <code class="literal">Validator</code> by matching attribute name to property name.  If you would like to provide special behavior or wire odd properties, you can jump ahead to <a href="#taglib-create-custom" title="3.5.5. Custom Tags">Section 3.5.5, “Custom Tags”</a>.
			</p><p>
				If you've just written your own <code class="literal">Validator</code>, you can add it to your JSF Application with the following snippet in your <code class="literal">faces-config.xml</code>:
			</p><pre class="programlisting">&lt;faces-config&gt;
  &lt;validator&gt;
    &lt;validator-id&gt;faces.validator.Email&lt;/validator-id&gt;
    &lt;validator-class&gt;com.mycompany.jsf.validate.EmailValidator&lt;/validator-class&gt;
  &lt;/validator&gt;
&lt;/faces-config&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-create-converter" />3.5.4. Converters</h3></div></div><div /></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="taglib-create-custom" />3.5.5. Custom Tags</h3></div></div><div /></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="template" />Chapter 4. Templating and Re-Use</h2></div></div><div /></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="template-overview" />4.1. Overview</h2></div></div><div /></div><p>
			TODO
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="template-tags" />4.2. UI Tags</h2></div></div><div /></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="template-tags-composition" />4.2.1. Compositions</h3></div></div><div /></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="architecture" />Chapter 5. Facelets Architecture</h2></div></div><div /></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="architecture-overview" />5.1. Architecture Overview</h2></div></div><div /></div><p>
			TODO
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="architecture-api" />5.2. Facelets API</h2></div></div><div /></div><p>
			TODO
		</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="architecture-api-factory" />5.2.1. FaceletFactory</h3></div></div><div /></div><p>
				TODO
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="architecture-api-facelet" />5.2.2. Facelet</h3></div></div><div /></div><p>
				TODO
			</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="architecture-api-handler" />5.2.3. FaceletHandler</h3></div></div><div /></div><p>
				TODO
			</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="architecture-compiler" />5.3. Document Compiler</h2></div></div><div /></div><p>
			TODO
		</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="dev" />Chapter 6. Extending Facelets</h2></div></div><div /></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="dev-tag" />6.1. Developing Tags</h2></div></div><div /></div><p>
			TODO
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="dev-custom" />6.2. Custom JSF Handlers</h2></div></div><div /></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dev-custom-component" />6.2.1. UIComponents</h3></div></div><div /></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dev-custom-validator" />6.2.2. Validators</h3></div></div><div /></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dev-custom-converter" />6.2.3. Converters</h3></div></div><div /></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="building" />Chapter 7. Building Facelets</h2></div></div><div /></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="building-ant" />7.1. Using Ant</h2></div></div><div /></div><p>
			TODO
		</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="building-ide" />7.2. IDE Integration</h2></div></div><div /></div><p>
			TODO
		</p></div></div></div></body></html>